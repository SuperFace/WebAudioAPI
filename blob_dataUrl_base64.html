<html>
<head>
<title>Blob base64</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store,no-siteapp, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<META HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT">
<meta name="viewport" content="width=device-width,inital-scale=1.0,maximum-scale=1.0,user-scalable=no,minimal-ui;">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="">
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="full-screen" content="yes">
<meta name="x5-fullscreen" content="true">
<meta name="format-detection" content="telephone=no">
<style>

</style>
</head>
<body>
<script type="text/javascript">
(function(){
	var root = this;
	var canvas = document.createElement("canvas");
	var img = new Image();
	img.onload = function(){
		canvas.width = img.width;
		canvas.height = img.height;
		canvas.drawImage(img);
		
		var dataurl = canvas.toDataURL('image/png');
		var xhr = new XMLHttpRequest();
		xhr.open('POST', '/server', true);
		xhr.send({"data": dataurl});
	};
	img.src = "./images/map.jpg";
	
}.call(this));
</script>
</body> 
</html>